<!DOCTYPE html>
<html lang=\"ru\">
<head>
    <meta charset=\"UTF-8\">
    <title>Калькулятор НПД</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 2rem auto; max-width: 720px; }
        form { display: grid; gap: 1rem; padding: 1.5rem; border: 1px solid #ddd; border-radius: 12px; }
        label { font-weight: 600; }
        input { padding: 0.5rem; font-size: 1rem; }
        button { padding: 0.75rem; font-size: 1rem; cursor: pointer; }
        .error { color: #b3261e; margin-bottom: 1rem; }
        .card { border: 1px solid #ddd; border-radius: 12px; padding: 1.5rem; margin-top: 1.5rem; }
        dl { display: grid; grid-template-columns: auto 1fr; gap: 0.5rem 2rem; }
    </style>
</head>
<body>
    <h1>Калькулятор налога на профессиональный доход</h1>
    <p>Ставки: 4% при работе с физическими лицами и 6% при работе с юрлицами/ИП. Вычет 10 000 ₽ снижает эффективные ставки до 3% и 4% соответственно, пока вычет не исчерпан.</p>

    {{if .Error}}
    <div class=\"error\">{{.Error}}</div>
    {{end}}

    <form action=\"/\" method=\"post\">
        <div>
            <label for=\"individual\">Доход от физических лиц (₽)</label>
            <input type=\"number\" step=\"0.01\" min=\"0\" id=\"individual\" name=\"individual_income\" placeholder=\"Например, 50000\">
        </div>
        <div>
            <label for=\"business\">Доход от юрлиц и ИП (₽)</label>
            <input type=\"number\" step=\"0.01\" min=\"0\" id=\"business\" name=\"business_income\" placeholder=\"Например, 120000\">
        </div>
        <button type=\"submit\">Рассчитать налог</button>
    </form>

    {{if .HasResult}}
    <section class=\"card\">
        <h2>Результаты расчёта</h2>
        <dl>
            <dt>Доход от физлиц:</dt><dd>{{printf "%.2f" .IncomeIndividuals}} ₽</dd>
            <dt>Налог (4%):</dt><dd>{{printf "%.2f" .TaxIndividuals}} ₽</dd>
            <dt>Доход от юрлиц/ИП:</dt><dd>{{printf "%.2f" .IncomeBusinesses}} ₽</dd>
            <dt>Налог (6%):</dt><dd>{{printf "%.2f" .TaxBusinesses}} ₽</dd>
            <dt>Применённый вычет:</dt><dd>{{printf "%.2f" .ReliefApplied}} ₽</dd>
            <dt>Оставшийся вычет:</dt><dd>{{printf "%.2f" .RemainingRelief}} ₽</dd>
            <dt>Итого налог:</dt><dd><strong>{{printf "%.2f" .TotalTax}} ₽</strong></dd>
        </dl>
    </section>
    {{end}}
</body>
</html>
